# 🚀 현대모비스 맞춤형 글로벌 손익 최적화 대시보드 개발기 (Streamlit BI Narrative)
**"데이터를 서랍 밖으로 끄집어내어, 실무자의 무기로 쥐어주다"**

이 문서는 제가 계량경제학의 복잡한 수식들을 어떻게 '현업이 매일 아침 접속해 클릭하는 인터랙티브 대시보드'로 변환시켰는지에 대한 **기획, 설계, 개발 노트이자 생생한 내러티브**입니다.

---

## 1. 💡 기획 및 개요 (왜 대시보드를 만들었는가?)

### "계량경제 모델은 완벽했습니다. 하지만 현업은 Python 코드를 읽지 않습니다."
프로젝트 중반부, Panel Fixed Effects와 VAR 모형을 통해 완벽한 충격반응함수(IRF)와 가격 탄력성을 도출했을 때 엄청난 성취감을 느꼈습니다. 하지만 곧바로 한계에 부딪혔습니다. **"그래서 내일 스페인 법인 브레이크 패드 가격을 몇 퍼센트 올리라는 건가요?"**라는 현업 부서장의 질문에 제가 짠 주피터 노트북(Jupyter Notebook) 화면은 아무런 대답도, 조작도 제공하지 못한다는 것을 깨달았습니다.

데이터 과학자의 역할은 통계적 유의성을 증명하는 데서 끝나지 않고, **비즈니스 액션을 가능케 하는 '도구(Tool)'**를 제공하는 데 있다고 생각했습니다. 그래서 '응용계량거시경제학' 지식 위에 **Frontend(Streamlit) BI 기술**을 결합하기로 결심했습니다. 

단순 보고용 엑셀(Static)이 아니라, 사용자가 직접 환율을 당겨보고, 가격을 슬라이더로 조절하면 실시간으로 예상 마진이 렌더링되는 **"현대모비스 맞춤형 글로벌 손익 최적화 전략 시뮬레이터(BI Dashboard App)"** 기획은 이렇게 시작되었습니다.

---

## 2. 🏗️ 각 파트별 설계 및 설명, 의도 (UI/UX Architecture & Rationale)

단순히 통계 결괏값을 나열하는 것을 넘어, "무엇을 볼 것인가?" 그리고 "어떻게 행동할 것인가?"를 4비트(Four-beat) 흐름으로 구성했습니다. 이 챕터에서는 **왜 해당 시각화 툴을 선택했는지, 기초 데이터는 어떻게 조달했는지** 그 근거를 밝힙니다.

### Page 1. [조망] Executive KPI Summary
*   **활용 데이터 및 구조**:
    *   **내부 데이터 (Simulated)**: `panel_sales_data.csv` (국가별 3개 부품군의 월별 가격/판매량/매출 26개월 시계열 구조)
    *   **외부 데이터 (Real)**: `var_macro_data.csv` 의 가장 최근 Timestamp 환율 및 철강 지수.
*   **시각화 선택 원인**: Plotly Choropleth Map (국가별 부품 단가 히트맵)
    *   숫자만 나열된 표(Table) 형태로는 전 세계 50여 개국 시장의 '가격 편차(Price Dispensation)'를 임원진이 직관적으로 캐치할 수 없습니다. 따라서 지리적 인접성과 단가 수준을 한눈에 매핑하기 위해 색상 척도(Color Scale) 기반의 레이어도형인 Choropleth Map을 채택했습니다. 
*   **UX 디테일**: 상단에 Glassmorphism(유리 질감) 기법의 4대 KPI 카드(매출, 환율 등락, 철강 지수, 관리 국가 수)를 배치해 보고서 제일 첫 장의 "요약 대시보드" 역할을 충실히 하도록 설계했습니다.

### Page 2. [미시 헷징] 실시간 가격 시뮬레이션 (Panel FE)
*   **활용 데이터 및 구조**: `linearmodels` 라이브러리로 백엔드에서 사전 학습해 추출한 '품목별 고정효과 탄력성 계수(Coefficient) 매트릭스'. 
*   **시각화 선택 원인**: Plotly Area Chart (예상 이익 최적화 곡선)
    *   현업의 고민은 "가격을 올리면 수요가 끊겨서 이익이 줄지 않을까?" 하는 막연한 두려움입니다. 이를 해소하기 위해 '가격 변동률(X축)' 대비 '총 예상 마진(Y축)'을 그리는 **Area Chart**를 구현했습니다. 선그래프(Line)보다 색이 채워진 면적 그래프가 "이익의 양(Volume)"을 시각적으로 강렬하게 전달하여, 현업 실무자가 마진 극대화 타협점을 시각적으로 탐색하게 유도합니다.
*   **UX 디테일**: 좌측 슬라이더로 가격 조정을 세팅하면 우측 곡선 위에 '수직 점선(Vertical Line)'이 실시간으로 이동하여 현재 조작값이 마진 곡선의 어느 위치에 있는지 시각적 피드백을 제공합니다.

### Page 3. [거시 방어] 거시 원가 동향 시뮬레이터 (VAR-IRF 예측)
*   **활용 데이터 및 구조 (Time Series)**: `pandas_datareader` 및 합성 로직으로 구성된 환율(KRW_USD), 글로벌 철강 가격 지수, 알루미늄 지수의 다변량 Monthly Time-Series Matrix (`var_macro_data.csv`).
*   **시각화 선택 원인 1 - Dual-axis Line Chart (역사적 추세 및 2-Years Forecast)**:
    *   단위 스케일이 전혀 다른 환율(1,300원대)과 인덱스(100pt 대)를 하나의 축에 우겨넣으면 변동 폭이 뭉개집니다. 따라서 이중 Y축(Dual Y-axis) 플롯을 채택하여 두 변수의 파동 유사성을 입증했습니다. 또한 끄트머리에 점선(Dash) 형태의 `statsmodels VAR` **미래 24개월 예측선(Forecast)**을 이어 붙여 단기 기획에 강력한 레퍼런스로 기능하게 했습니다.
*   **시각화 선택 원인 2 - Bar Chart (IRF 골든타임 알람)**:
    *   "환율 쇼크폭 조절 슬라이더"에 연동된 하단 차트입니다. 선그래프가 아닌 막대(Bar) 형태를 취해 +1~+2개월 사이 집중적으로 원가가 치솟는 '물리적 상승량(덩어리)' 자체를 충격적으로 강조했습니다. "노란색 음영(골든타임)" 박스를 배경에 깔아 실무자가 머리를 쓰지 않고도 액션 타이밍을 즉각 인지할 수 있게 UI를 설계했습니다.

### Page 4. [타겟 공략] 글로벌 마켓 Pricing Anomaly 색출 (K-Means)
*   **활용 데이터 및 구조 (Cross-sectional)**: World Bank API(`wbgapi`)를 통해 JSON으로 긁어와 DataFrame으로 플래트닝한 '전 세계 50여 국의 실물 경제 지표(GDP per Capita, Inflation)'.
*   **시각화 선택 원인**: Plotly 3D Scatter Plot (마켓 지상도)
    *   2D 평면 산점도로는 1) 경제력(GDP), 2) 물가상승률(인플레이션), 3) 부품 단가(Price)라는 핵심 3차원 변수를 한눈에 관찰할 수 없습니다. 따라서 마우스로 드래그, 회전, 줌이 가능한 3D Scatter를 채택하여 면접관이나 임원진이 직접 시장 구조를 입체적으로 돌려보며 '시각적 인사이트'를 얻는 경험(Wow-point)을 노렸습니다.
*   **백그라운드 로직**: 그래프 하단에는 K-Means 군집과 **잔차(Residual) 방정식** 알고리즘이 실시간으로 구동됩니다. 회귀 적정선 대비 잔차가 가장 마이너스(-)인 '당장 가격을 올려도 되는(Underpriced) 국가 Top 5'를 데이터프레임으로 역산 출력하여 영업부서 메일로 바로 보낼 수 있는 리스트를 자동화했습니다.

---

## 3. 🛠️ 실행 방법론 및 아키텍처 전략

### 3.1. 기술 아키텍처 (Tech Stack & Flow)
가장 보수적인 제조업에서 쓸 수 있도록 최신형과 안정성을 결합했습니다.
*    **Data Layer**: 가상의(Mock) 판매 DB + World Bank & Macro Economic API (`pandas`, `numpy`)
*    **Analytical Engine Layer**: `statsmodels` (VAR Forecasting), `linearmodels` (Panel FE), `scikit-learn` (K-Means & Residual Analysis)
*    **Presentation Layer**: `Streamlit` (Web Container), `Plotly` (Interactive Custom Visualization)

### 3.2. 트러블슈팅 스토리 (문제와 돌파구)
*   **문제 1. "통계 용어를 현업이 이해하지 못하는 문제 (UX 장벽)"**
    *   **현상**: 앱을 프로토타입으로 띄우고 보니, 화면에 "Panel FE 탄력성", "VAR IRF 적용"이라는 딱딱한 단어가 가득했습니다. 비전공 면접관이나 현업 부서는 이해하기 힘들었습니다.
    *   **돌파구**: 앱의 모든 하위 파트 헤더에 Streamlit의 `help="설명"` 툴팁 기능을 코딩했습니다. 헤더 옆의 `[?]` 아이콘에 마우스를 올리면, "물건 가격을 1% 올렸을 때 수요가 몇 % 떨어지는지가 탄력성입니다", "환율이 오늘 폭등하면 철강 가격은 언제 오를까요? 이 파급력이 IRF입니다" 같은 **친절한 일상 언어 번역기**를 띄우도록 수정했습니다. 개발자의 언어를 비즈니스의 언어로 변환한 UX 전략입니다.

*   **문제 2. "대량 데이터 연산으로 인한 앱 렌더링 지연 (Performance)"**
    *   **현상**: 슬라이더를 당길 때마다 VAR 모형과 K-Means를 매번 수천 줄의 로우(Row)로 다시 학습(Fit)하다 보니 버벅임(Lag)이 심했습니다.
    *   **돌파구**: 모델 학습 자체는 외부 스크립트(`1_*.ipynb`, `generate_macro_data.py`)에서 1회성 Batch로 처리하여 결과값(패러미터)만 CSV나 변수로 떨궈놓고, 대시보드의 `@st.cache_data` 데코레이터를 이용해 결과 지표만 로드(Load)하도록 파이프라인의 **프론트-백 분리 구조**를 취했습니다. 덕분에 슬라이더 조작 시 0.1초 내외로 쾌적하게 수익 최적화 곡선이 렌더링되도록 퍼포먼스를 최적화했습니다.

---

## 4. 🎮 유저 가이드 (How to use)
실제 면접관 앞이나 포트폴리오 스크린캐스트(영상)에서 시연할 가상 시나리오입니다.

1.  **[사이드바] 네비게이션 & 가이드라인**:
    *   좌측의 현대모비스 로고 아래의 1번부터 4번 탭을 클릭해 화면을 전환하세요.
    *   계량경제학 용어가 낯설다면, 좌측 하단 **[💡 분석 기법 가이드 (통계/계량)]** 바를 펼치면 비전공자도 10초 만에 이해할 수 있는 요약 설명이 제공됩니다.
2.  **[탭 2. 가격 시뮬레이션] 마진 방어 테스트**:
    *   '조정 대상 부품군'에서 `Brake Pad`를 선택합니다.
    *   '가격 변동율(%)' 슬라이더를 5% 우측으로 당겨봅니다.
    *   화면상의 예상 영업 이익이 어떻게 변동하는지, 곡선의 어느 지점에 빨간 점선이 위치하는지 확인하며 팀 내 최적의 마진 타협점을 도출하세요.
3.  **[탭 3. 거시 원가 동향] 골든타임 알람**:
    *   우측의 실시간 2-Years Forecast(점선 그래프)로 24개월 뒤의 원가 추세를 훑어봅니다.
    *   (What-if) 환율 급등 슬라이더를 극한값(Ex: +150원 방어선 붕괴)으로 조작해보세요. 하단 붉은색 막대 그래프가 솟구치며 **💡 2개월 골든타임 노란색 음영 구역**이 시각적으로 두드러지는 것을 확인하실 수 있습니다.
4.  **[탭 4. 마켓 클러스터링] 인상 타겟 지목**:
    *   우측 상단의 3D 그래프를 마우스 좌클릭으로 이리저리 돌려가며 GDP, 인플레이션, 가격 간의 입체적 지형을 확인하세요.
    *   하단에 프로그램이 실시간 K-Means 잔차 역산으로 뽑아낸 **[최우선 가격 인상 타겟 (Underpriced)]** 데이터프레임을 바로 Excel로 다운로드하여 해당 국가 지사장에게 Pricing 정책 지도를 메일로 발송하시면 됩니다.

---
_"분석을 위한 분석에서 멈추지 않고, 이 대시보드 프로젝트를 통해 저는 **'복잡한 데이터 이면에 숨겨진 돈의 흐름을 찾아내어 버튼 하나로 조작하게 만들어주는'** 모비스 가격관리 직무에 완비된 인재임을 입증하고 싶습니다."_
